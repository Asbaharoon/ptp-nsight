<html>
<head>
<title>Build</title>
<link rel="stylesheet" type="text/css" href="help.css">
<script type="text/javascript" src="thumb.js"> </script>
</head> 
<body>
<h1 id="top">C/C++ Project Properties and Build Configurations</h1>
<!--  FIXME  this may need some work. Most of the content taken from SciComP slides and may replace
some info in sync.html and modules.html  -->
<p>This section discusses
<ul>
<li>Build Configurations
<li>Sync Configurations
<li>Environment Management (e.g. with Modules)
</ul>

<p>A build configuration provides the necessary information to build the project.
<p>The build configuration information is specified in the project properties.
<p>Open the project properties by right-clicking on the project name in the
<b>Project Explorer</b> view and selecting <b>Properties</b> from the bottom of the
context menu list.
<p><img src="images/sync-buildConfig.png"></p>
<p><b>C/C++ Build</b> - the main properties page for build.  Allows you to configure the build command.
The default build command is "make" but this can be changed to anything.
The properties listed under <b>C/C++ Build </b> include:
<ul>
<li><b>Build Variables</b> - create and manage variables that can be used in other build configuration pages
<li><b>Discovery Options</b> - obsolete options page for discovering compiler settings
(Use <b>C/C++ General > Preprocessor Include Paths</b> instead.)
<li><b>Environment</b> - Modify or add environment variables passed to the build
<li><b>Logging</b> - Enable or disable build logging
<li><b>Settings</b>
  <ul>
    <li>Binary parser selection (used to display binaries in <b>Project Explorer</b>)
    <li>Error parser selection (used to parse the output from compiler commands, and populate the Problems view)
    <li>Tool Chain Settings (managed build projects only - not used for Makefile projects)
    </ul>
<li><b>Tool Chain Editor</b> - allows the tools in a particular tool chain to be modified
<li><b>XL C/C++ Compiler</b> - Compiler settings for XL C/C++ compilers (if installed)
</ul>

<h2>Selecting a Build Configuration</h2>
<p>Multiple build configurations may be available for a project.
Synchronized projects will usually have a remote and a local build configuration
(the local build configuration is optional).
Build configurations can be specified for different architectures on different remote target platforms.
<p>The active build configuration will be used when the build button 
<img src="images/01sync-hammer-icon.png">
is selected.

You can change the active configuration by using the "sundial" icon next to the build icon.
<p><img src="images/sync-selectConfiguration.png"></p>
Or you can build and switch simultaneously using the arrow next to the build icon.
build-set-config.png

<p>You can also use the <b>Build Configurations</b> project context menu to change
the active configuration.  To do so, right click on the project, select 
<b>Build Configurations > Set Active > </b> and select the desired build configuration.
<p><img src="images/build-set-config.png"></p>

<h2>Building Synchronized Projects</h2>
<p>Build configurations and syncronize configurations are independent.
<p>When the build button
<img src="images/01sync-hammer-icon.png">
is selected, the <b>active <i>build</i> configuration</b> will be built on the remote system specified by the
<b>active <i>synchronize</i> configuration</b>.
<p>It is possible to change which build configuration is active, but make sure 
this makes sense on the remote system specified in the
synchronize configuration.
<p>A build configuration can be associated with a synchronize configuration,
so that it is automatically selected when the synchronize configuration is changed.


<p>On the Synchronize page of Project Properties, the build configuration can be set
for each Sync configuration.
</p>
<p><img src="images/sync-projProperties.png">
<p>&nbsp
<p>This can also be done via right mouse on project in <b>Project Explorer</b>,
select <b>Synchronize > Manage ...</b>
<p><img src="images/build-sync-manage.png"></p>
<p>This brings up the <b>Manage Synchronize Configurations</b>
dialog.
<p><img src="images/build-sync-manage-dialog.png">

<h3 id="envMgmt">Environment Management</h3>
<p>If the remote system has an environment system (such as Modules)
installed, a custom set of modules can be configured for building C/C++ projects.
<p>In the <b>Manage Synchronize Configurations</b>
dialog,
select the configuration you wish to change at the top, then check
<b>Use an environment management system to customize the remote build environment</b>.
<p><img src="images/build-sync-manage-env.png"></p>
<p>The remote system is queried for the availability of modules
and the dialog is populated with available modules and currently selected
modules.
Select a module from the <b>Available Modules</b>
list and click the <b>Add -></b> button to add it to the <b>Selected Modules</b>
list.
<p>Use the <b><- Remove</b> button to remove modules from the 
<b>Selected Modules</b> list.
<p>Use the <b>Filter list</b> field to quickly find modules with a given name.
<p>Use the <b>Up</b> and <b>Down</b> buttons to change the order of the
<b>Selected Modules</b>.
<p>Click <b>Select Default</b> to load only those modules that are present
in a new login shell.
<h3>Building with Modules</h3>
<p>To build the project, Eclipse will
<ul>
<li>Open a new Bash login shell
<li>Execute <i>module purge</i>
<li>Execute <i>module load</i> for each selected module
<li>Run <i>make</i>
</ul>
<p>Module commands are displayed in the <b>Console</b> view during build.
<p>Beware of modules that must be loaded in a particular order, or that contain
common paths like <code>/bin</code> or <code>/usr/bin</code>.
<p><img src="images/build-sync-manage-env-console.png"></p>

<a href="sync.html">Synchronized projects</a>










<p>&nbsp
<p>&nbsp
<p><a href="#top">Back to Top</a> | <a href="toc.html">Back to Table of Contents</a>
</body>

</html>